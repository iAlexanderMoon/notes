
CREATE ROLE db_executor
GRANT EXECUTE TO db_executor


For record of obs installation 

EXEC sp_addrolemember 'db_executor', 'obsapi';


Cleaned up the contacts!

DELETE FROM obs.dbo.ProducerContact
DELETE FROM obs.dbo.VendorContact
DELETE FROM obs.dbo.PlantContact
DELETE FROM [obs].[dbo].[Contact] WHERE Email  like 'Email%'


DELETE FROM [obs].[dbo].[Contact] WHERE LastName = 'Handler'
DELETE FROM [obs].[dbo].[Contact] WHERE LastName = 'Producer'
DELETE FROM [obs].[dbo].[Contact] WHERE LastName = 'Producer2'
DELETE FROM [obs].[dbo].[Contact] WHERE LastName = 'Administrator'
DELETE FROM [obs].[dbo].[Contact] WHERE LastName = 'Test123'
DELETE FROM [obs].[dbo].[Contact] WHERE LastName = 'tes'

-- NEED TO GET RID OF OLD RECEIVED LOADS TO GET RID OF THIS CONTACT
DELETE FROM [obs].[dbo].[Contact] WHERE LastName = 'Receiver'

SELECT * FROM [obs].[dbo].[Contact]


DECLARE @UserId UNIQUEIDENTIFIER = 'c3c21650-3700-4fe0-b782-0c5e5ecc9f6d'
INSERT INTO dbo.Contact (CreatedByUserId, ModifiedByUserId, EMail, FirstName, LastName) VALUES (@UserId, @UserId, 'test@olymel.com', 'Test', 'Olymel')


-- NEED TO BE ABLE TO HAVE MORE THAN 1 CONTACT WITHOUT A UserId
-- APPLY THE LATEST DACPAC FIRST
UPDATE [obs].[dbo].[Contact] SET UserId = NULL




-- Ian Moon Contact 5ae8356b-e757-40dc-bccf-c62956a42aa2
-- Red Deer PlantId 351c2ba8-f790-411f-918d-ca41c5eb46c3
INSERT INTO [obs].[dbo].[PlantContact] (ContactId, PlantId) VALUES ('5ae8356b-e757-40dc-bccf-c62956a42aa2', '351c2ba8-f790-411f-918d-ca41c5eb46c3' )


-- Cleaning up the BookingFlag
Fraser - BBQ Party: There was only 1 entry in ProducerBookingFlag

DELETE   FROM [obs].[dbo].[ProducerBookingFlag] 

DELETE FROM [obs].dbo.BookingBookingFlag WHERE Flag = 'Fraser - BBQ Party'
DELETE FROM [obs].[dbo].[LoadBookingFlag] WHERE Flag = 'Fraser - BBQ Party'
DELETE FROM [obs].dbo.BookingFlag WHERE Text = 'Fraser - BBQ Party'

DELETE FROM [obs].dbo.BookingBookingFlag WHERE Flag LIKE 'SSF%'
DELETE FROM [obs].[dbo].[LoadBookingFlag] WHERE Flag LIKE 'SSF%'
DELETE FROM [obs].dbo.BookingFlag WHERE Text LIKE 'SSF%'

DELETE FROM [obs].dbo.BookingBookingFlag WHERE Flag LIKE 'Bad Hogs%'
DELETE FROM [obs].[dbo].[LoadBookingFlag] WHERE Flag LIKE 'Bad Hogs%'
DELETE FROM [obs].dbo.BookingFlag WHERE Text LIKE 'Bad Hogs%'

DELETE FROM [obs].dbo.BookingBookingFlag WHERE Flag LIKE '3G%'
DELETE FROM [obs].[dbo].[LoadBookingFlag] WHERE Flag LIKE '3G%'
DELETE FROM [obs].dbo.BookingFlag WHERE Text LIKE '3G%'

INSERT INTO dbo.Producer 
( Code, Name, ProducerType, OlymelProducerId, UniversalNumber, UniversalOrganization, Active, Alias, Id, CreatedByUserId, CreatedOn, ModifiedByUserId, ModifiedOn )
VALUES 
('H64219',	'OlyNorth Barrwest',			'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H64220',	'OlyNorth Trilean',				'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H64221', 	'OlyNorth Van Aar Home',		'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H64223',	'OlyNorth SBL Home',			'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H64222',	'OlyNorth Van Aar Linden',		'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H64224',	'Olynorth SBL North',			'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H64226',	'OlyNorth Ramsay Farms',		'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H64228',	'OlyNorth Poot',				'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H81416',	'Cloverleaf Colony Farming',	'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H81419',	'Barrwest Pork Isolation',		'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H81421',	'Mialta Colony',				'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H81422',	'Spring Lake Colony',			'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H81426',	'Sand Ridge Farm Ltd',			'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H81427',	'Twilight Colony',				'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H81429',	'Parkland Colony',				'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H81430',	'Whland',						'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H81431',	'Hog Wild',						'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H82001',	'Santangelo Livestock AB',		'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H82002',	'Santangelo Livestock SK',		'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H92001',	'H@ms Cview Farming Co Ltd',	'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H92002',	'H@ms Acadia Farming Co',		'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('10060037', 'Whitesand Farming Co Ltd',	'WHE', 		NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' )



INSERT INTO dbo.Producer 
( Code, Name, ProducerType, OlymelProducerId, UniversalNumber, UniversalOrganization, Active, Alias, Id, CreatedByUserId, CreatedOn, ModifiedByUserId, ModifiedOn )
FROM
('H00001',	'Roberge TBD',					'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H00002',	'Steves Livestock TBD',			'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H00003',	'Transall TBD',					'Olymel',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' )

UPDATE dbo.Producer SET Name = UPPER(Name)


INSERT INTO dbo.Producer 
( Code, Name, ProducerType, OlymelProducerId, UniversalNumber, UniversalOrganization, Active, Alias, Id, CreatedByUserId, CreatedOn, ModifiedByUserId, ModifiedOn ) 
VALUES
('H92003',	'BUTTE COLONY',	'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' ),
('H64032',	'PARKLAND HOG FEEDERS CAMP CREEK',	'Direct',	NULL, NULL, NULL, 1, NULL, NEWID(),'00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00','00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:11.0333333 +00:00' )

--SELECT * FROM dbo.Producer WHERE Code = 'H92003'
INSERT INTO dbo.ProducerTattoo 
    (CreatedByUserId, CreatedOn, ModifiedByUserId, ModifiedOn, Tattoo, Code) 
VALUES
    ('00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00', '00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00','19126','H64032'),
    ('00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00', '00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00','55004','H92003'),
    ('00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00', '00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00','50504','H92003'),
    ('00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00', '00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00','50054','H92003'),
    ('00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00', '00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00','50554','H92003')

INSERT INTO dbo.ProducerTattoo 
    (CreatedByUserId, CreatedOn, ModifiedByUserId, ModifiedOn, Tattoo, Code) 
VALUES
    ('00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00', '00000000-0000-0000-0000-000000000000', '2019-09-24 21:45:24.4833333 +00:00','60456','H81421')


idmctl adduser kaylyn.donald kaylyn.donald 34ldyn1!  OBS.Receiver
idmctl adduser connie.stanislas connie.stanislas 34lDyn1! OBS.Receiver